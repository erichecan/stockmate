# 仓库 / 库存 / 条码 业务逻辑说明与示例数据

> 本文档对应 seed-warehouse-inventory.ts 生成的示例数据，便于理解业务逻辑。

## 一、核心概念

### 1. 仓库 (Warehouse)
- **定义**: 物理仓库，如主仓、备货仓、FBA 备货中心
- **字段**: 名称、编码、地址、是否默认

### 2. 货位 (BinLocation)
- **定义**: 仓库内的具体存放位置，采用「区-通道-架-位」结构
- **编码示例**: `A-01-01-01` = A区 / 01通道 / 01架 / 01位
- **条码**: 每个货位有唯一条码，用于 PDA 扫码上架、拣货

### 3. 库存 (InventoryItem)
- **维度**: SKU × 仓库 × 货位（货位可为空 = 暂存区）
- **数量**: `quantity` 总数量，`lockedQty` 锁定数量
- **可用数量**: `quantity - lockedQty`（锁定通常对应预订单）

### 4. 条码类型
| 类型 | 用途 | 数据来源 | 打印场景 |
|------|------|----------|----------|
| SKU 条码 | 商品识别 | Sku.code / Sku.barcode | 商品标签 |
| 货位条码 | 位置识别 | BinLocation.code | 货位永久标签 |
| 外箱条码 | 收货/装箱 | PackingListItem (箱号+SKU) | 外箱标签 |

---

## 二、示例数据 (共 45+ 条)

### 1. 仓库

| 编码 | 名称 | 说明 |
|------|------|------|
| WH-MAIN | 主仓库 | 深圳南山区，默认仓 |
| WH-PREP | 备货仓 | 深圳宝安区 |
| WH-FBA | FBA 备货中心 | 东莞虎门 |

### 2. 货位 (主仓部分)

| 编码 | 区 | 通道 | 架 | 位 | 条码 |
|------|-----|------|-----|-----|------|
| A-01-01-01 | A | 01 | 01 | 01 | A-01-01-01 |
| A-01-01-02 | A | 01 | 01 | 02 | A-01-01-02 |
| ... | ... | ... | ... | ... | ... |

### 3. 库存场景 (33 条)

| 场景 | SKU | 仓库 | 货位 | 数量 | 锁定 | 说明 |
|------|-----|------|------|------|------|------|
| 1-15 | 手机壳/配件 | 主仓 | 具体货位 | 50-200 | 部分5 | 已上架，可拣货 |
| 16-23 | 手机壳/配件 | 主仓 | 无 | 100-240 | 1条30 | 暂存区，未上架 |
| 24-29 | 配件 | 备货仓 | 无 | 40-115 | 0 | 备货仓库存 |
| 30-33 | 配件 | FBA | 无 | 80 | 1条20 | 发往 FBA 的备货 |

### 4. 装箱单 / 外箱条码 (12 条)

| 箱号 | SKU | 数量 | 外箱条码 |
|------|-----|------|----------|
| CTN-001 | (根据PO) | 20-40 | PL-CTN-001-SKUCODE |
| CTN-002 | ... | ... | PL-CTN-002-SKUCODE |
| ... | ... | ... | ... |

**收货流程**: 扫外箱条码 → 系统识别箱号+SKU → 核对数量 → 录入收货 → 生成入库任务

---

## 三、业务流程串联

1. **采购到货**: PO → Shipment → PackingList（外箱条码）→ 收货
2. **入库**: 扫商品条码 + 扫货位条码 → 绑定到 InventoryItem
3. **拣货**: 拣货单按货位排序 → 到货位扫货位条码 → 扫商品条码确认
4. **条码打印**: SKU 标签 / 货位标签 / 外箱标签 → 热敏打印机

---

*生成时间: 2026-02-28T05:23:09.538Z*
